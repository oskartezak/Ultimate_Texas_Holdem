\documentclass[a4paper,12pt]{article}

% ----------------------------------
% Paketi za slovenščino in znanstveno pisanje
% ----------------------------------
\usepackage[slovene]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% ----------------------------------
% Oblika strani
% ----------------------------------
\usepackage{geometry}
\geometry{margin=2.5cm}

% ----------------------------------
% Matematični simboli in formule
% ----------------------------------
\usepackage{amsmath, amssymb}

% ----------------------------------
% Slike in tabele
% ----------------------------------
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{booktabs} % lepe tabele

% ----------------------------------
% Koda (če jo želiš prikazati)
% ----------------------------------
\usepackage{listings}
\usepackage{xcolor}
\lstset{
    basicstyle=\ttfamily\small,
    backgroundcolor=\color{gray!10},
    frame=single,
    breaklines=true
}

% ----------------------------------
% Naslov
% ----------------------------------
\title{Poročilo projekta pri predmetu Izbrane teme iz analize podatkov}
\author{Neo Mistral, Oskar Težak \\ Fakulteta za matematiko in fiziko, Univerza v Ljubljani}
\date{\today}

\begin{document}

\maketitle

\section{Uvod}

Cilj projekta je razviti model z uporabo \textbf{nevronskih mrež}, 
ki bi znal poiskati optimalno strategijo za igranje igre \textit{Texas Hold'em} pokra.
\section{Opis igre Ultimate Texas Hold'em} 

Link do githuba in katere datoteke so priložene

\textbf{Ultimate Texas Hold'em} je različica pokra, ki se igra proti delilcu, 
ne pa proti drugim igralcem. Cilj igre je premagati delilca z boljšo 
poker kombinacijo iz dveh lastnih in petih skupnih kart.

\subsection*{Potek igre}
\begin{enumerate}
    \item \textbf{Začetna stava} -- igralec postavi enaka vložka na polji \emph{Ante} in \emph{Blind}. 
    Po želji lahko postavi tudi stransko stavo \emph{Trips}, ki se izplača na osnovi končne kombinacije.
    
    \item \textbf{Deljenje kart} -- igralec in delilec prejmeta po dve skriti karti. 
    Igralec lahko zdaj izbere, da stavi dodatno stavo \emph{Play} v višini $3\times$ ali $4\times$ 
    začetne stave, ali pa počaka.
    
    \item \textbf{Flop} -- razkrijejo se prve tri skupne karte. Če igralec prej ni stavil, 
    lahko zdaj postavi stavo \emph{Play} v višini $2\times$ začetne stave, ali pa še vedno počaka.
    
    \item \textbf{Turn in River} -- razkrijeta se še četrta in peta skupna karta. 
    Če igralec do zdaj ni stavil, mora zdaj postaviti stavo \emph{Play} v višini $1\times$ začetne stave.
    
    \item \textbf{Razkritje} -- delilec razkrije svoji dve karti. 
    Za kvalifikacijo mora imeti vsaj par. Če se delilec ne kvalificira, se stava \emph{Ante} vrne igralcu, 
    stave \emph{Blind} in \emph{Play} pa se obravnavajo glede na primerjavo kombinacij.
    
    \item \textbf{Izplačilo} -- 
    \begin{itemize}
        \item Stava \emph{Play} se vedno izplača $1:1$, če je igralčeva kombinacija boljša.
        \item Stava \emph{Ante} se izplača $1:1$, če se delilec kvalificira in igralec zmaga.
        \item Stava \emph{Blind} se izplača po posebni lestvici, odvisno od moči igralčeve kombinacije (npr. \emph{Straight} $1:1$, \emph{Flush} $3:2$, \emph{Full House} $3:1$, ipd.).
        \item Stranska stava \emph{Trips} se izplača posebej glede na moč kombinacije, neodvisno od izida proti delilcu.
    \end{itemize}
\end{enumerate}

\section{Generiranje in oblike podatkov}

Podatke sva generirala naključno. Igra temelji na 52 kartah, ki sva jih označila s številkami od 1 do 52. 
Vsak igralec, vključno z delilcem, prejme dve karti, na mizi pa je skupaj pet kart: najprej trije t.~i.~\textit{flop} 
in nato še dve karti, ki skupaj s prvimi tremi tvorita \textit{river}.

Podatke sva vedno generirala za celotno igro, da sva lahko izračunala njen izid. V model pa sva nato vključila le tiste karte, 
ki so bile na voljo v določenem krogu igre. Te karte so predstavljale vhodne spremenljivke:
\begin{itemize}
    \item v prvem krogu je model videl samo dve karti igralca (ostala mesta so bila nastavljena na 0),
    \item v drugem krogu pet kart,
    \item v tretjem krogu vseh sedem kart.
\end{itemize}

Model nikoli ni imel vpogleda v delilčeve karte. V primeru več igralcev pa je model upošteval tudi njihove karte.

Drugi del podatkov so predstavljale \textbf{ciljne vrednosti}. Preizkusila sva več načinov njihovega določanja:
\begin{enumerate}
    \item \textbf{Povprečenje iger} -- za vsak par igralčevih kart sva generirala več možnih kombinacij preostalih kart in izračunala povprečen izid na 
    za krog igre. 
    \item \textbf{Binaren izid (zmaga/poraz)} -- kot ciljno spremenljivko sva uporabila enostaven pokazatelj zmage ali poraza (0 ali 1). 
    Tudi te vrednosti sva generirala na enak način kot pri povprečenju, le da sva namesto povprečnega izida upoštevala zmago ali poraz.
    \item \textbf{Izkupiček posamezne igre} -- kot ciljno spremenljivko sva uporabila dejanski izid posamezne igre, brez povprečenja. 
    Tudi ti podatki so bili generirani enako kot pri prvem pristopu, pri čemer sva ohranila rezultat posamezne igre.
\end{enumerate}

\paragraph{Velikost podatkovne zbirke.}
Za igralca je velikost podatkovne zbirke znašala 1326 primerov (vseh možnih začetnih kombinacij igralčevih kart). 
Za preostale karte sva uporabila večkratnike te številke: prvi večkratnik $15$ (za "flop"), drugi $15$ (za "river"), 
in pri zadnjem večkratnik $20$ (za delilca). 

\section{Metodologija}

Pri večini poskusov sva uporabila \textbf{linearne} oziroma 
\textbf{konvolucijske nevronske mreže}. 
Za določanje stavnih pragov sva poleg različnih optimizacijskih pristopov 
uporabila tudi \textbf{lastne ocene}, s katerimi sva dodatno prilagodila 
strategijo in izboljšala delovanje modela. Povsod sva poskušala z razlčnimi velikostmi
slojev.


\subsection{Poskus 1}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} konvolucijski in linearni modeli z \textit{one-hot} kodiranjem kart \\
\textbf{Rezultati testiranja:} rezultati so bili slabi, modeli niso zaznali uporabnih vzorcev in niso uspeli preseči naključnega ugibanja. \\
\textbf{Komentar:} preveliko število vhodov, ki nosijo premalo informacij. Učenje traja predolgo.

\subsection{Poskus 2}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} konvolucijski in linearni modeli, kjer je bila vsaka karta predstavljena s parom $(\text{rang}, \text{barva})$ \\
\textbf{Rezultati testiranja:} rezultati so bili nezadovoljivi, saj se prednost delilca ni zmanjšala. \\
\textbf{Komentar:} takšna predstavitev slabše prikazuje relacije med kartami.

\subsection{Poskus 3}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} linearni model z \textit{embedding} plastjo in sigmoidno aktivacijsko funkcijo $(0,1)$ \\
\textbf{Rezultati testiranja:} prag za stavo je bil nastavljen na $0.5$. Delilec je v povprečju ohranil prednost približno $5\%$. \\
\textbf{Komentar:} težave pri nastavljanju pragov, model je bil zelo občutljiv na manjše spremembe.

\subsection{Poskus 4}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo in sigmoidno aktivacijsko funkcijo $(0,1)$ \\
\textbf{Rezultati testiranja:} prag za stavo $0.5$, delilec je bil v profitu za približno $5\%$. \\
\textbf{Komentar:} enake težave kot pri linearnem modelu – težavno nastavljanje pragov in občutljivost na spremembe.

\subsection{Poskus 5}
\textbf{Vhodni podatki:} binarni izid igre \\
\textbf{Model:} linearni model z \textit{embedding} plastjo in sigmoidno aktivacijsko funkcijo $(0,1)$ \\
\textbf{Rezultati testiranja:} prag za stavo $0.5$. Delilec je ohranil prednost približno $7\%$. \\
\textbf{Komentar:} model ocenjuje le zmage/poraze, ne pa dobička, zato so razlike v izkupičku lahko velike.

\subsection{Poskus 6}
\textbf{Vhodni podatki:} binarni izid igre \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo in sigmoidno aktivacijsko funkcijo $(0,1)$ \\
\textbf{Rezultati testiranja:} prag za stavo $0.5$. Delilec je bil v profitu približno $7\%$. \\
\textbf{Komentar:} enake omejitve kot pri linearnem modelu – ocenjevanje le zmage, brez upoštevanja velikosti dobička.

\subsection{Poskus 7}
\textbf{Vhodni podatki:} izkupiček posamezne igre \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo in sigmoidno aktivacijsko funkcijo $(0,1)$ \\
\textbf{Rezultati testiranja:} prag za stavo $0.5$. Delilec je bil v prednosti približno $4\%$. \\
\textbf{Komentar:} za enako kakovost rezultatov je potrebna bistveno večja količina podatkov kot pri povprečenju.

\subsection{Poskus 8}
\textbf{Vhodni podatki:} izkupiček posamezne igre \\
\textbf{Model:} linearni model z \textit{embedding} plastjo in sigmoidno aktivacijsko funkcijo $(0,1)$ \\
\textbf{Rezultati testiranja:} prag za stavo $0.5$. Delilec je bil v prednosti približno $5\%$. \\
\textbf{Komentar:} enake ugotovitve kot pri poskusu 7 – potrebna je večja količina podatkov.

\subsection{Poskus 9}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} linearni model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} prag za stavo ročno prilagojen okoli $0$, fiksen za vse kroge. Delilec je bil v povprečju v prednosti približno $4\%$. \\
\textbf{Komentar:} ročno nastavljanje pragov je lažje, model pa se uči razmeroma hitro.

\subsection{Poskus 10}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} prag za stavo ročno prilagojen okoli $0$, fiksen za vse kroge. Delilec je bil v prednosti približno $4\%$. \\
\textbf{Komentar:} podobno kot pri linearnem modelu – enostavnejše nastavljanje pragov in hitrejše učenje.

\subsection{Poskus 11}
\textbf{Vhodni podatki:} binarni izid igre \\
\textbf{Model:} linearni model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} prag za stavo ročno nastavljen okoli $0.5$. Delilec je bil v prednosti približno $5\%$. \\
\textbf{Komentar:} ni velike razlike v primerjavi z uporabo sigmoidne funkcije. Model še vedno ne meri dejanskega dobička.

\subsection{Poskus 12}
\textbf{Vhodni podatki:} binarni izid igre \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} prag za stavo ročno nastavljen okoli $0.5$. Delilec je bil v prednosti približno $6\%$. \\
\textbf{Komentar:} podobno kot pri linearnem modelu – brez merjenja dejanskega dobička, rezultati ostajajo nezadostni.

\subsection{Poskus 13}
\textbf{Vhodni podatki:} izkupiček posamezne igre \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} prag za stavo ročno nastavljen okoli $0$, fiksen za vse kroge. Delilec je bil v prednosti približno $4\%$. \\
\textbf{Komentar:} zaradi velike količine podatkov je bilo učenje počasno.

\subsection{Poskus 14}
\textbf{Vhodni podatki:} izkupiček posamezne igre \\
\textbf{Model:} linearni model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} prag za stavo ročno nastavljen okoli $0$, fiksen za vse kroge. Delilec je bil v prednosti približno $4\%$. \\
\textbf{Komentar:} enake težave kot pri poskusu 13 – prevelik obseg podatkov in posledično počasno učenje.

\subsection{Poskus 15}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} linearni model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} pragovi za vsak krog optimizirani z \texttt{minimize} funkcijo. 
Delilec je bil v prednosti približno $3\%$. \\
\textbf{Komentar:} hitro učenje, optimizator se je izkazal kot učinkovit.

\subsection{Poskus 16}
\textbf{Vhodni podatki:} povprečenje iger \\
\textbf{Model:} konvolucijski model z \textit{embedding} plastjo \\
\textbf{Rezultati testiranja:} pragovi za vsak krog optimizirani z \texttt{minimize} funkcijo. 
Delilec je bil v prednosti približno $3\%$. \\
\textbf{Komentar:} hitro učenje, optimizator se je izkazal kot učinkovit.


\section{Problemi}
- vhodna oblika podatkov
- pri sigmoidni funkciji podatki zgoščeni pri 0 in 1

\section{Za n igralcev}
- opisi poskusov in ugotovitve (negativne)

\section{Rezultati}
\begin{itemize}
    \item Natančnost, F1, MSE, ipd.
    \item Grafi in tabele rezultatov
\end{itemize}

\section{Zaključek}
Povzetek glavnih ugotovitev in predlogi za nadaljnje delo.

\end{document}
